<!--
index: 6
title: 渐变色曲线 2
-->

<script>
  const data = [
    { time: '2016-08-08 00:00:00', tem: 10, city: 'beijing' },
    { time: '2016-08-08 00:10:00', tem: 22, city: 'beijing' },
    { time: '2016-08-08 00:30:00', tem: 20, city: 'beijing' },
    { time: '2016-08-09 00:35:00', tem: 26, city: 'beijing' },
    { time: '2016-08-09 01:00:00', tem: 20, city: 'beijing' },
    { time: '2016-08-09 01:20:00', tem: 26, city: 'beijing' },
    { time: '2016-08-10 01:40:00', tem: 28, city: 'beijing' },
    { time: '2016-08-10 02:00:00', tem: 20, city: 'beijing' },
    { time: '2016-08-10 02:20:00', tem: 28, city: 'beijing' },
    { time: '2016-08-09 00:35:00', tem: 25.8, city: 'tokyo' },
    { time: '2016-08-09 01:00:00', tem: 24, city: 'tokyo' },
    { time: '2016-08-09 01:20:00', tem: 28, city: 'tokyo' },
    { time: '2016-08-10 01:40:00', tem: 22, city: 'tokyo' },
    { time: '2016-08-10 02:00:00', tem: 24, city: 'tokyo' },
    { time: '2016-08-10 02:20:00', tem: 20, city: 'tokyo' }
  ];
  const chart = new F2.Chart({
    id: 'mountNode',
    pixelRatio: window.devicePixelRatio
  });
  const defs = {
    time: {
      type: 'timeCat',
      tickCount: 2,
      range: [ 0, 1 ]
    },
    tem: {
      tickCount: 5,
      min: 0
    }
  };
  chart.axis('time', {
    label(text, index, total) {
      const cfg = {
        textAlign: 'center'
      };
      // 第一个点左对齐，最后一个点右对齐，其余居中，只有一个点时左对齐
      if (index === 0) {
        cfg.textAlign = 'start';
      }
      if (index > 0 && index === total - 1) {
        cfg.textAlign = 'end';
      }
      return cfg;
    }
  });
  chart.source(data, defs);
  chart.legend(false); // 关闭图例
  chart.tooltip(false); // 关闭 tooltip

  // 创建渐变色
  const canvas = document.getElementById('mountNode');
  const linear_gradient = canvas.getContext('2d').createLinearGradient(0, 0, 0, 500);
  linear_gradient.addColorStop(0.65, '#fff');
  linear_gradient.addColorStop(0, 'rgb(15, 141, 232)');

  // 绘制渐变色区域图
  chart.area().position('time*tem')
    .color('city', function(city) {
      if (city === 'beijing') {
        return linear_gradient;
      }
      return 'rgba(0, 0, 0, 0)';
    });
  // 绘制线图
  chart.line().position('time*tem')
    .color('city')
    .size('city', function(city) {
      if (city === 'beijing') {
        return 3;
      }
      return 2;

    });

  // 绘制辅助元素
  // 坐标点
  const changePoint = [ '2016-08-09 00:35:00', 25.8 ];
  const endPoint = [ '2016-08-10 02:20:00', 28 ];

  chart.guide().html({
    position: endPoint,
    html: '<div style="border-radius: 12px;border: none;width: 22px;height: 22px;background-color: rgba(102, 182, 241, 0.5);""></div>'
  });
  chart.guide().html({
    position: endPoint,
    html: '<div style="border-radius: 7px;border: none;width: 12px;height: 12px;background-color: rgb(15, 141, 232);""></div>'
  });
  chart.guide().tag({
    position: changePoint,
    content: '方案调整',
    background: {
      fill: '#ff4d4f'
    },
    direct: 'tc',
    offsetY: -3
  });
  chart.render();
</script>
